var _ = require('lodash');
var EMPTY_LAYOUT = {
    y: 0,
    w: 1,
    h: 1
}
function layoutFromItems(items, fields, currentLayout, defaultLayouts) {
    //Take items
    
    var layoutItem;

    var layout = _.map(items || [], function(item, index) {
        
        var layoutItem = itemFromLayout(currentLayout, item.id);
        return _.assign({
            i: (item.id + ''),
        }, EMPTY_LAYOUT, defaultLayout, (layoutItem || {}), fields)
    });

}

function itemFromLayout(layout, id) {
    return _.find(layout || [], function(layoutItem) {
        return layoutItem.i == id;
    });
}



var LayoutManager = {
    layoutFromItems: layoutFromItems,
    itemFromLayout: itemFromLayout
}

module.exports = LayoutManager;